## $Id$ --*- makefile -*--

## Copyright (C) 2002 Enrico Scholz <enrico.scholz@informatik.tu-chemnitz.de>
##  
## This program is free software; you can redistribute it and/or modify
## it under the terms of the GNU General Public License as published by
## the Free Software Foundation; version 2 of the License.
##  
## This program is distributed in the hope that it will be useful,
## but WITHOUT ANY WARRANTY; without even the implied warranty of
## MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
## GNU General Public License for more details.
##  
## You should have received a copy of the GNU General Public License
## along with this program; if not, write to the Free Software
## Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
##  

check_LIBRARIES			=  libenscsentinel.a

libenscsentinel_a_SOURCES	=  $(lib_SRCS)
libenscsentinel_a_CPPFLAGS	=  -DENSC_TESTSUITE

check_PROGRAMS			=  blacklist-parser blacklist-check prioqueue-check
check_SCRIPTS			=  testsuite/blacklist-check1.sh \
                                   testsuite/prioqueue-check1.sh \
                                   testsuite/prioqueue-check2.sh \
                                   testsuite/prioqueue-check3.sh

blacklist_parser_SOURCES	=  testsuite/blacklist-parser.c
blacklist_parser_LDADD		=  libenscsentinel.a
blacklist_parser_CPPFLAGS	=  -DENSC_TESTSUITE

blacklist_check_SOURCES		=  testsuite/blacklist-check.c
blacklist_check_LDADD		=  libenscsentinel.a
blacklist_check_CPPFLAGS	=  -DENSC_TESTSUITE

prioqueue_check_SOURCES		=  testsuite/prioqueue-check.c
prioqueue_check_LDADD		=  libenscsentinel.a
prioqueue_check_CPPFLAGS	=  -DENSC_TESTSUITE

tests_SCRPTS			=  testsuite/blacklist-parser.sh		\
				   testsuite/blacklist-check.sh

tests_XTRA			=  testsuite/prioqueue-check.sh			\
				   testsuite/functions

tests_DAT			=  testsuite/data/blacklist-check.fd3		\
				   testsuite/data/blacklist-check.ips		\
				   testsuite/data/blacklist-check.lst		\
				   testsuite/data/blacklist-check.out		\
				   testsuite/data/blacklist-check.res		\
				   testsuite/data/blacklist-check1.fd3		\
				   testsuite/data/blacklist-check1.lst		\
				   testsuite/data/blacklist-check1.out		\
				   testsuite/data/blacklist-check1.res		\
				   testsuite/data/blacklist.dat			\
				   testsuite/data/blacklist.out			\
				   testsuite/data/prioqueue-check1.inp		\
				   testsuite/data/prioqueue-check1.out		\
				   testsuite/data/prioqueue-check2.inp		\
				   testsuite/data/prioqueue-check2.out		\
				   testsuite/data/prioqueue-check3.inp		\
				   testsuite/data/prioqueue-check3.out


TESTS				=  $(tests_SCRPTS) prioqueue-check		\
				   testsuite/blacklist-check1.sh		\
				   testsuite/prioqueue-check1.sh		\
				   testsuite/prioqueue-check2.sh		\
				   testsuite/prioqueue-check3.sh

testsuite_FILES			=  $(tests_SCRPTS) $(tests_DAT) $(tests_XTRA)

testsuite/blacklist-check1.sh:	testsuite/blacklist-check.sh
				@rm -f $@
				ln -s ../$< $@

testsuite/prioqueue-check%.sh:	testsuite/prioqueue-check.sh
				@rm -f $@
				ln -s ../$< $@
